<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø­Ø§Ø³Ø¨Ø© Ù„ÙÙ…Ù‰ Ø¹ØµØ§Ù… Ø§Ù„Ø·ÙˆÙŠÙ„</title>
<link rel="manifest" href="manifest.webmanifest" />
<meta name="theme-color" content="#0ea5e9" />
<style>
body{background:#0b1220;color:#e5e7eb;font-family:Tajawal,Segoe UI,Arial;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}
.card{width:min(540px,95vw);background:#0e1729;padding:20px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
input{width:100%;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:10px;border:1px solid #223149;background:#0a1324;color:#e5e7eb}
button{width:100%;padding:12px;border:none;border-radius:10px;background:#0ea5e9;color:#001a29;font-weight:700;cursor:pointer}
.result{margin-top:15px;background:#091223;padding:10px;border-radius:10px}
</style>
</head>
<body>
<div class="card">
<h2 style="text-align:center;color:#7dd3fc">ğŸ’‰ Ø­Ø§Ø³Ø¨Ø© Ù„ÙÙ…Ù‰ Ø¹ØµØ§Ù… Ø§Ù„Ø·ÙˆÙŠÙ„</h2>
<label>Ø§Ù„Ø³ÙƒØ± Ø§Ù„Ø­Ø§Ù„ÙŠ</label><input id="current" type="number" placeholder="Ù…Ø«Ø§Ù„: 240" />
<label>Ø§Ù„Ù‡Ø¯Ù</label><input id="target" type="number" placeholder="Ù…Ø«Ø§Ù„: 130" value="130" />
<label>Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><input id="carb" type="number" placeholder="Ù…Ø«Ø§Ù„: 45" />
<label>Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª (ICR)</label><input id="icr" type="number" placeholder="Ù…Ø«Ø§Ù„: 12" />
<label>Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„ØªØµØ­ÙŠØ­ (ISF)</label><input id="isf" type="number" placeholder="Ù…Ø«Ø§Ù„: 95" value="95" />
<button onclick="calc()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø©</button>
<div id="out" class="result" style="display:none"></div>
</div>
<script>
function num(v){const x=parseFloat(v);return isNaN(x)?null:x;}
function calc(){
let c=num(current.value),t=num(target.value),carb=num(carb.value),icr=num(icr.value),isf=num(isf.value);
if(c===null||t===null||isf===null){alert('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³ÙƒØ± Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ§Ù„Ù‡Ø¯Ù ÙˆISF');return;}
let meal=0;if(carb){if(!icr){alert('Ø£Ø¯Ø®Ù„ ICR');return;}meal=carb/icr;}
let corr=(c-t)/isf;if(corr<0)corr=0;
let total=(meal+corr).toFixed(1);
let preds=[0.4,0.75,0.95].map(f=>Math.round(t+(c-t)*(1-f)));
out.style.display='block';
out.innerHTML=`<b>Ø¬Ø±Ø¹Ø© Ø§Ù„ØªØµØ­ÙŠØ­:</b> ${corr.toFixed(1)}<br><b>Ø¬Ø±Ø¹Ø© Ø§Ù„ÙˆØ¬Ø¨Ø©:</b> ${meal.toFixed(1)}<br><b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</b> ${total}<br><hr><b>ØªÙ†Ø¨Ø¤ Ø§Ù„Ø³ÙƒØ±:</b><br>Ø¨Ø¹Ø¯ 1 Ø³Ø§Ø¹Ø© â‰ˆ ${preds[0]}<br>Ø¨Ø¹Ø¯ 2 Ø³Ø§Ø¹ØªÙŠÙ† â‰ˆ ${preds[1]}<br>Ø¨Ø¹Ø¯ 3 Ø³Ø§Ø¹Ø§Øª â‰ˆ ${preds[2]}`;
}
</script>
</body>
</html>